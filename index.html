<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Be my Valentine?</title>
  <style>
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #fecfef);
      color:#1b1020;
      text-align:center;
      padding:24px;
    }
    .card{
      width:min(760px, 92vw);
      background: rgba(255,255,255,0.78);
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 18px;
      padding: 22px 18px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.12);
      backdrop-filter: blur(8px);
      position: relative;
    }
    h1{
      margin: 0 0 14px;
      font-size: clamp(1.45rem, 3.5vw, 2rem);
      line-height: 1.15;
    }
    .buttons{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-bottom: 10px;
      position: relative;
    }
    button{
      border:0;
      border-radius:999px;
      padding: 10px 18px;
      font-size: 1rem;
      cursor:pointer;
      transition: transform 0.15s ease;
      user-select: none;
    }
    #yes{ background:#ff2f6d; color:#fff; }
    #no{ background:#fff; color:#ff2f6d; border:1px solid rgba(0,0,0,0.1); }

    #afterYes { display:none; margin-top: 14px; }
    #msgTitle { font-weight: 900; font-size: 1.25rem; }
    #msgText { margin-top: 6px; }

    .choices{
      display:none;
      margin-top: 12px;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }
    .choiceBtn{
      background:#fff;
      border:1px solid rgba(0,0,0,0.1);
      color:#1b1020;
    }
    .choiceBtn:hover{ transform: translateY(-1px); }

    #picked{
      display:none;
      margin-top: 10px;
      font-weight: 800;
    }

    #photo {
      display:none;
      width: min(560px, 88vw);
      border-radius: 18px;
      margin: 12px auto 0;
      box-shadow: 0 14px 40px rgba(0,0,0,0.18);
    }

    /* Particle overlay */
    #confettiLayer{
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 9999;
    }

    /* Heart pieces (CSS heart) */
    .confettiHeart{
      position: absolute;
      width: 14px;
      height: 14px;
      background: var(--c, #ff2f6d);
      transform: rotate(45deg);
      opacity: 0.95;
      animation: flyUp 900ms ease-out forwards;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,0.15));
    }
    .confettiHeart::before,
    .confettiHeart::after{
      content:"";
      position:absolute;
      width:100%;
      height:100%;
      background: var(--c, #ff2f6d);
      border-radius:50%;
    }
    .confettiHeart::before{ top:-50%; left:0; }
    .confettiHeart::after{ left:-50%; top:0; }

    /* Emoji pieces (ğŸ’— + ğŸ†) */
    .confettiEmoji{
      position: absolute;
      font-size: 18px;
      line-height: 1;
      transform: translate(0,0);
      opacity: 1;
      animation: floatEmoji 950ms ease-out forwards;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,0.12));
    }

    @keyframes flyUp{
      0%   { transform: translate(0,0) rotate(45deg) scale(1); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)) rotate(45deg) scale(0.9); opacity: 0; }
    }
    @keyframes floatEmoji{
      0%   { transform: translate(0,0) rotate(0deg) scale(1); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)) rotate(var(--rot)) scale(1.05); opacity: 0; }
    }
  </style>
</head>
<body>
  <div id="confettiLayer"></div>

  <div class="card">
    <h1>To the love of my life, will you be my Valentine?</h1>

    <div class="buttons">
      <button id="yes">YASSSSSSS ğŸ˜›ğŸ˜›ğŸ’…ğŸ’…</button>
      <button id="no">hmm Iâ€™ll think about it ğŸ¤” ğŸ¤¨</button>
    </div>

    <div id="afterYes">
      <div id="msgTitle">Yayyyyy ğŸ’— Youâ€™re stuck with me now.</div>
      <div id="msgText">Your job: just show up and look cute.</div>
    </div>

    <div class="choices" id="choices">
      <button class="choiceBtn" data-pick="Dinner ğŸ">Dinner ğŸ</button>
      <button class="choiceBtn" data-pick="Dessert ğŸ°">Dessert ğŸ°</button>
      <button class="choiceBtn" data-pick="Both ğŸ˜ˆ" data-party="true">Both ğŸ˜ˆ</button>
    </div>

    <div id="picked"></div>

    <img id="photo" src="IMG_5365.JPEG" alt="Our photo together" />
  </div>

  <script>
    const yes = document.getElementById("yes");
    const no = document.getElementById("no");
    const afterYes = document.getElementById("afterYes");
    const photo = document.getElementById("photo");
    const choices = document.getElementById("choices");
    const picked = document.getElementById("picked");
    const confettiLayer = document.getElementById("confettiLayer");

    // STOPPP gets longer every time
    let stopPCount = 2;
    function makeStopLonger(){
      stopPCount += 1;
      no.textContent = "STOP" + "P".repeat(stopPCount) + " ğŸ˜­";
    }

    function showChoices(){
      choices.style.display = "flex";
      picked.style.display = "none";
      picked.textContent = "";
    }

    function wrongAnswer(){
      choices.style.display = "none";
      picked.style.display = "block";
      picked.textContent = "Wrong answer ğŸ˜¤ Try again.";
      setTimeout(() => showChoices(), 900);
    }

    yes.addEventListener("click", () => {
      afterYes.style.display = "block";
      photo.style.display = "block";
      showChoices();

      no.style.display = "none";
      yes.textContent = "Yay ğŸ’";
    });

    function dodgeNo(){
      makeStopLonger();
      const x = (Math.random() - 0.5) * 240;
      const y = (Math.random() - 0.5) * 160;
      no.style.transform = `translate(${x}px, ${y}px)`;
    }
    no.addEventListener("mouseover", dodgeNo);
    no.addEventListener("click", (e) => { e.preventDefault(); dodgeNo(); });

    function popHearts(x, y, count){
      const colors = ["#ff2f6d", "#ff4d6d", "#ff5ea0", "#ff2f9a"];
      for(let i=0;i<count;i++){
        const h = document.createElement("div");
        h.className = "confettiHeart";

        const dx = (Math.random() - 0.5) * 360;
        const dy = -(120 + Math.random() * 360);

        const size = 10 + Math.random() * 10;
        h.style.width = size + "px";
        h.style.height = size + "px";

        const c = colors[Math.floor(Math.random() * colors.length)];
        h.style.setProperty("--c", c);

        h.style.left = x + "px";
        h.style.top = y + "px";
        h.style.setProperty("--dx", dx + "px");
        h.style.setProperty("--dy", dy + "px");
        h.style.animationDuration = (650 + Math.random() * 500) + "ms";
        h.style.opacity = (0.7 + Math.random() * 0.3).toFixed(2);

        confettiLayer.appendChild(h);
        setTimeout(() => h.remove(), 1400);
      }
    }

    function popEmojis(x, y, count){
      const emojis = ["ğŸ’—", "ğŸ†"]; // change/remove ğŸ† anytime
      for(let i=0;i<count;i++){
        const s = document.createElement("span");
        s.className = "confettiEmoji";
        s.textContent = emojis[Math.floor(Math.random() * emojis.length)];

        const dx = (Math.random() - 0.5) * 340;
        const dy = -(120 + Math.random() * 360);
        const rot = (Math.random() - 0.5) * 120 + "deg";

        s.style.left = x + "px";
        s.style.top = y + "px";
        s.style.setProperty("--dx", dx + "px");
        s.style.setProperty("--dy", dy + "px");
        s.style.setProperty("--rot", rot);
        s.style.fontSize = (16 + Math.random() * 14) + "px";
        s.style.animationDuration = (650 + Math.random() * 650) + "ms";
        s.style.opacity = (0.75 + Math.random() * 0.25).toFixed(2);

        confettiLayer.appendChild(s);
        setTimeout(() => s.remove(), 1500);
      }
    }

    // 5-second party mode (continuous)
    let partyIntervalId = null;
    function partyForFiveSeconds(x, y){
      if(partyIntervalId) return;

      const tick = () => {
        const jitterX = x + (Math.random() - 0.5) * 160;
        const jitterY = y + (Math.random() - 0.5) * 80;
        popHearts(jitterX, jitterY, 10);
        popEmojis(jitterX, jitterY, 6);
      };

      tick();
      partyIntervalId = setInterval(tick, 170);

      setTimeout(() => {
        clearInterval(partyIntervalId);
        partyIntervalId = null;
      }, 5000);
    }

    document.querySelectorAll(".choiceBtn").forEach(btn => {
      btn.addEventListener("click", () => {
        const pick = btn.getAttribute("data-pick");

        if(pick === "Dinner ğŸ" || pick === "Dessert ğŸ°"){
          wrongAnswer();
          return;
        }

        picked.style.display = "block";
        picked.textContent = `Locked in: ${pick} ğŸ’˜`;

        const rect = btn.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top + rect.height / 2;
        partyForFiveSeconds(x, y);
      });
    });
  </script>
</body>
</html>
